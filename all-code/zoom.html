<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="mystyle.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <title>Lottie Layout</title>
  </head>
  <body>
    <div class="container-fluid">
        <div class="row">
           
            <div class="col-md-6">
                <div class="row actionRow">
                    <div class="operations">
                        <div class="columnCustom">
                            <div class="speedSection">
                                <div class="alignArea" style=" flex-direction:column;">
                                    <label class="headLable">Speed</label>
                                    <ul class="listItemsCustom">
                                
                                        <li>
                                            <input type="range" min="25" max="300" value = "50" oninput="changeSpeedValue(this.value)" id="speedSlider">
                                        </li>
                                    </ul>
                                </div>
            
                            </div>
                        </div>
                        
                        <div class="columnCustom">
                            <div class="colorSection">
            
                                <div class="alignArea">
                                    <label class="headLable">Highlight Color</label>
                                    <ul class="listItemsCustom">
                                       
                                        <li> <input type="color" id="highlightColor" name="favcolor"></li>
                                        
                                    </ul>
                                    
                                    
                                </div>
            
                            </div>
                        </div>
                        <div class="columnCustom">
                            <div class="alignArea">
                            <label class="headLable">Text Color</label>
                            <ul class="listItemsCustom">
                                <!-- <li>
                                    <button style="text-align: center;"type="button" class="buttonCustom" onclick="textFill()">  <span style="text-align: center;">Text Fill</span></button>
                                </li> -->
                                <li>
                                    <label for="textColor"> <input type="color" id="textColorInput" ></label>
                                 
                                </li>
                            </ul>
                            </div>
                            <div class="alignArea">
    
                            <label class="headLable">Page Color</label>
    
    
                            <ul class="listItemsCustom">
                                <!-- <li>
                                    <button style="text-align: center;"type="button" class="buttonCustom" onclick="pageFill()">  <span style="text-align: center;">Page Fill</span></button>
                                </li> -->
                                <li>
                                    <label for="pageColor"><input type="color" id="pageColorInput" ></label>
                                
                                </li>
            
                            </ul>
                            </div>
            
            
                         
                        </div>
                        <div class="columnCustom">
                            <div class="alignArea" style="align-items: center;">
                            <label class="headLable">Rotate(180deg)</label>
                            <ul class="listItemsCustom">
                                <li>
                                    <button style="display: flex;justify-content: start;align-items: center;"type="button" class="buttonCustom" onclick="rotateDown()"> <img style="width:35px;height:35px;" src="./degree.png" alt=""> </button>
                                </li>
                            </ul>
                            </div>
            
                            <div class="alignArea" style="align-items: center;">
                            <label class="headLable">Zoom</label>
                            <ul class="listItemsCustom">
                                <li>
                                    <button style="text-align: center;"type="button" class="buttonCustom" onclick=""> <img style="width: 32px; height: 33px;" src="./zoom.png" alt=""></button>
                                </li>
                            </ul>
                            </div>
            
                        </div>
                        <div class="columnCustom">
                            <div class="highlightSection">
            
                                <div class="alignArea">
                                    <label class="headLable"> Highlight Type</label>
                                    <div class="highlightTypeSection">
    
                                        <ul class="listItemsCustom">
                                            <!-- <li>
                                                <button style="text-align: center;"type="button" class="buttonCustom" onclick="textFill()">  <span style="text-align: center;">Text Fill</span></button>
                                            </li> -->
                                            <li>
                                                <label for="" style="font-weight: 800;">S</label>
                                                <select name="" id="linechange" onchange="linechange()">
                                                    <option value="4">1</option>
                                                    <option value="5">2</option>
                                                    <option value="6">4</option>
                                                    <option value="8">6</option>
                                                    
                                                    
                                                </select>
                                            </li>
                                        </ul>
                                        <ul class="listItemsCustom">
                                            <!-- <li>
                                                <button style="text-align: center;"type="button" class="buttonCustom" onclick="textFill()">  <span style="text-align: center;">Text Fill</span></button>
                                            </li> -->
                                            <li>
                                                <label for="" style="font-weight: 800;">V</label>
                                                <select name="" id="linechanger" onchange="linechanger()">
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">4</option>
                                                    <option value="7">6</option>
                                                    
                                                    
                                                </select>
                                            </li>
                                        </ul>
                                        
                                    </div>
            
                                    
                                    
                                </div>
            
                            </div>
                        </div>
                    
                   
                    <div class="columnCustom">
                        <div class="alignArea" style="flex-direction:column;">
                        <label class="headLable" >Choose Book</label>
                        <ul class="listItemsCustom" style="margin-left: 0px;">
                            <!-- <li>
                                <button style="text-align: center;"type="button" class="buttonCustom" onclick="textFill()">  <span style="text-align: center;">Text Fill</span></button>
                            </li> -->
                            <li>
            
                                <select name="" id="chooseBook" onchange="chooseBook()">
                                    <option value="1">Crime and Punishment</option>
                                    <option value="2">Frankestein </option>
                                    <option value="3">Around the world in eighty days</option>
                                    <option value="4">Don Quixote</option>
        
                                    
                                    
                                </select>
                            </li>
                        </ul>
                        </div>
                        <div class="alignArea" style="flex-direction:column;">
                        <label class="headLable" style="margin-top: 30px;">No. of Books</label>
                        <ul class="listItemsCustom" style="margin-left: 0px;">
                            <!-- <li>
                                <button style="text-align: center;"type="button" class="buttonCustom" onclick="textFill()">  <span style="text-align: center;">Text Fill</span></button>
                            </li> -->
                            <li>
                               
                                <select name="" id="" onchange="window.location.href=this.value;">
                                    <option value="">select option</option>
                                    <option value="index.html">1 Book</option>
                                    <option value="2books.html">2 Books</option>
                                    <option value="4books.html">4 Books</option>
                                    <option value="zoom.html">zooming</option>
                                    
                                    
                                </select>
                            </li>
                        </ul>
                        </div>
                    </div>
                    </div>
                   

                  
                  </div>
                
            </div>
            
            <div class="col-md-6">
                <div class="row" style="padding-top: 48px;padding-bottom: 48px;">
                    <div class="lottieMain">
                        <!-- <label>Book Lottie File</label> -->
                        <div id="level3">
                        </div> 
                    </div>
                </div>
            </div>
        </div>

       
   
       

    </div>
   

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  

</body>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.6.4/lottie_svg.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>


<script>
   
var json ={"v":"5.7.1","fr":30,"ip":0,"op":121,"w":1600,"h":1300,"nm":"zoom","ddd":0,"assets":[],"fonts":{"list":[{"origin":1,"fPath":"","fClass":"","fFamily":"Open Sans","fWeight":"","fStyle":"Regular","fName":"OpenSans","ascent":75.9994506835938}]},"layers":[{"ddd":0,"ind":1,"ty":5,"nm":"1 - FD 2","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-8,10,0],"ix":2},"a":{"a":0,"k":[-52.073,230.606,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"t":{"d":{"k":[{"s":{"sz":[818.5,388.5],"ps":[-446.5,99.0000152587891],"s":28,"f":"OpenSans","t":"On an exceptionally hot evening early in July a young man  ","j":0,"tr":0,"lh":33.6,"ls":0,"fc":[0,0,0]},"t":0},{"s":{"sz":[818.5,388.5],"ps":[-446.5,99.0000152587891],"s":28,"f":"OpenSans","t":"On an exceptionally hot evening early in July a young man came out of the garret in which he lodged in S. Place and  ","j":0,"tr":0,"lh":33.6000061035156,"ls":0,"fc":[0,0,0]},"t":31},{"s":{"sz":[818.5,388.5],"ps":[-446.5,99.0000152587891],"s":28,"f":"OpenSans","t":"On an exceptionally hot evening early in July a young man came out of the garret in which he lodged in S. Place and walked slowly, as though in hesitation, towards K. bridge.\r    He had successfully avoided meeting his landlady on the ","j":0,"tr":0,"lh":33.6000061035156,"ls":0,"fc":[0,0,0]},"t":60},{"s":{"sz":[818.5,388.5],"ps":[-446.5,99.0000152587891],"s":28,"f":"OpenSans","t":"On an exceptionally hot evening early in July a young man came out of the garret in which he lodged in S. Place and walked slowly, as though in hesitation, towards K. bridge.\r    He had successfully avoided meeting his landlady on the staircase. His garret was under the roof of a high,five-storied house and was more like a cupboard than a room. The landlady who provided him with garret, dinners, and attendance, lived on the floor below, and every time he went","j":0,"tr":0,"lh":33.6000061035156,"ls":0,"fc":[0,0,0]},"t":90}]},"p":{},"m":{"g":1,"a":{"a":0,"k":[0,0],"ix":2}},"a":[{"nm":"Animator 1","s":{"t":0,"xe":{"a":0,"k":0,"ix":7},"ne":{"a":0,"k":0,"ix":8},"a":{"a":0,"k":100,"ix":4},"b":1,"rn":0,"sh":1,"r":1},"a":{}}]},"ip":0,"op":3300,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[800,650,0],"ix":2},"a":{"a":0,"k":[-8,10,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.833],"y":[1,1,-15.667]},"o":{"x":[0.1,0.1,0.167],"y":[0,0,16.667]},"t":0,"s":[0,0,100]},{"t":30,"s":[100,100,100]}],"ix":6,"x":"var $bm_rt;\n$bm_rt = loopOut();"}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[1120,824],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.211764705882,0.211764705882,0.211764705882,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-8,10],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3300,"st":0,"bm":0}],"markers":[]}

var container = document.getElementById("level3");

var animationData = lottie.loadAnimation({
	container: container,
	renderer: 'svg',
	loop: true,
	autoplay: true,
    animationData: json,
})

var ready = false;


function reloadAnimation(newAnimationData) {

	var currentFrame = animationData.currentFrame;
	animationData.destroy();
	animationData = undefined;
	animationData = lottie.loadAnimation({
		container:container,
		renderer: 'svg',
		loop: true,
		autoplay: true,
		animationData: newAnimationData
	});
	animationData.setSpeed(localStorage.getItem('playSpeed'));
	animationData.goToAndPlay(currentFrame, true);
}

function reloadAnimationFrom0(newAnimationData) {       

animationData.destroy();
animationData = undefined;
animationData = lottie.loadAnimation({
	container:container,
	renderer: 'svg',
	loop: true,
	autoplay: true,
	animationData: newAnimationData
});
animationData.setSpeed(localStorage.getItem('playSpeed'));
}

animationData.addEventListener('data_ready', () => {
	ready = true;
});

function changeSpeedValue (val){

	animationData.setSpeed(val/100);
	console.log(val/100);
	localStorage.setItem('playSpeed', val/100);


}


function rotateDown(){
	var n = $("svg").css("transform");
  if(n == 'matrix(1, 0, 0, 1, 0, 0)'){
	$('svg').css("transform", "rotate(180deg)");

  }
  else if(n == 'matrix(-1, 1.22465e-16, -1.22465e-16, -1, 0, 0)'){
	$('svg').css("transform", "rotate(360deg)");

  }
else{
	$('svg').css("transform", "rotate(180deg)");

  }

	$('svg').css("transition", "all 1s ease 0s");

}


// line types
function linechange(linenumber){
console.log(animationData);
let selectedNumber = parseInt(document.getElementById('linechange').value);
console.log(selectedNumber)

animationData.animationData.layers[0].ef[1].ef[0].v.k = selectedNumber;
reloadAnimation(animationData.animationData);
	
}

function linechanger(linenumber){
console.log(animationData);
let selectedNumber = parseInt(document.getElementById('linechanger').value);
console.log(selectedNumber)

animationData.animationData.layers[0].ef[1].ef[0].v.k = selectedNumber;
reloadAnimation(animationData.animationData);
	
}


//colors
function scaleRGB(n) {
	return Math.round((n / 255 ) * 100) / 100;
}

function hexToRgbA(hex) {
	var c;
	var list = [];

	hex = hex.trim();
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
		c= hex.substring(1).split('');
		if(c.length== 3){
			c= [c[0], c[0], c[1], c[1], c[2], c[2]];
		}
		c= '0x' + c.join('');
		list.push(this.scaleRGB(c>>16&255));
		list.push(this.scaleRGB(c>>8&255));
		list.push(this.scaleRGB(c&255));
		list.push(1);
		return list;
	}
	return (this.hexToRgbA("#000000"))
}


let highlightColor = document.getElementById('highlightColor');   

let bookPageColor = document.getElementById('pageColorInput'); 

let bookTextColor = document.getElementById('textColorInput'); 

highlightColor.onchange = function changeInputColor(){
	
	json.layers[0].ef[4].ef[0].v.k = hexToRgbA(this.value);
	reloadAnimation(animationData.animationData);
} 

bookPageColor.onchange = function changePageColor(){
	
	json.layers[0].ef[2].ef[0].v.k = hexToRgbA(this.value);
	reloadAnimation(animationData.animationData);
} 

bookTextColor.onchange = function changeTextColor(){
	
	json.layers[0].ef[3].ef[0].v.k = hexToRgbA(this.value);
	reloadAnimation(animationData.animationData);
} 

//books

function chooseBook(){
	
	let selectedBook = parseInt(document.getElementById('chooseBook').value);
	//console.log(selectedBook);
	json.layers[0].ef[0].ef[0].v.k = selectedBook;
	reloadAnimationFrom0(animationData.animationData); //reloading from frame 0 when choosing a new book

}


</script>

<script> 
	$( document ).ready(function() {
		localStorage.setItem('playSpeed', 1)
});
	</script> 